<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>EGE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="css/style.css"> -->
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="icon" type="image/png" href="img/tildafavicon.ico">
  <style>
    .vh {
      position: absolute !important;
      clip: rect(1px 1px 1px 1px);
      clip: rect(1px, 1px, 1px, 1px);
      padding: 0 !important;
      border: 0 !important;
      height: 1px !important;
      width: 1px !important;
      overflow: hidden
    }

    body {
      font-family: roboto, serif, tahoma;
    }

    .timer {
      /*border:2px solid green;*/

      display: flex;
      justify-content: space-around;
      padding: 5%;
      font-size: 125%;
      flex-wrap: wrap;
    }

    .head {
      width: 100%;
    }

    .timer__column {
      padding: 5%;
      /*border:2px solid rgba(132,231,0,1);*/
      display: -webkit-flex;
      display: -moz-flex;
      display: -ms-flex;
      display: -o-flex;
      display: flex;
      flex-direction: column;
      align-content: center;
      align-items: center;
      justify-content: space-between;
      /*align-self: center;*/
      font-size: 2.5em;
    }

    .fz {
      font-size: 600%;
    }
  </style>
</head>

<body>

  <header>
    <div class="timer">
      <div class="timer__column head v">До получения ключа</div>
      <div class="timer__column head vh">До печати</div>
      <div class="timer__column head vh">До окончания экзамена</div>
      <div class="timer__column days first-collum v">
        <span id="day">
          0
        </span>
        <span class="timer__description">
          Дней
        </span>
      </div>
      <div class="timer__column days">
        <span id="hour">
          0
        </span>
        <span class="timer__description">
          Часов
        </span>
      </div>
      <div class="timer__column days">
        <span id="min">
          0
        </span>
        <span class="timer__description">
          Минут
        </span>
      </div>
      <div class="timer__column days">
        <span id="sec">
          0
        </span>
        <span class="timer__description">
          Секунд
        </span>
      </div>
    </section>

  </header>

  <script>

    TimeForKey = new Date(2020, 6, 15, 22, 13, 15, 0);
    TimeForPrint = new Date(2020, 6, 15, 22, 41, 50, 0);
    TimeEnd = new Date(2020, 6, 15, 14, 22, 55, 0);

    var todayTime = new Date();
    var time1=TimeForKey - todayTime;
    var time2=TimeForPrint - todayTime;
    var time3=TimeEnd - todayTime;
  
   var correctTime = function (time) {
      time = new Date();
  time1=(TimeForKey - time) %60;
     time2=(TimeForPrint - time);
     time3=(TimeEnd - time);
     console.log('time1 ' + time1)
     // console.log('time2 ' + time2)
     // console.log('time3 ' + time3)
   }   
   var reloadPage = function (Number) {
// Math.floor(((TimeForKey - 
   time1=(TimeForKey - time) %60;
     time2=(TimeForPrint - time);
     time3=(TimeEnd - time);
     if ((time1 ==1) || (time2 == 1)  || (time3 == 1) )
     {
      document.location.reload(true);
    } else {
      console.log('time1 ' + time1)
      console.log('time2 ' + time2)
      console.log('time3 ' + time3)
    }
  }
  document.addEventListener("DOMContentLoaded", function (a) {
    // reloadPage();
    // correctTime(today);
    Timer();
    setTimeout(reloadPage(),1000)

  });

    // if (Timer(TimeForKey)) {
    //   Timer(TimeForPrint)
    //   TimeForKey=TimeForPrint
    // } else if (Timer(TimeForPrint)) {
    //   TimeForPrint=TimeEnd
    // }


    // time = new Date(year, month, date hours, minutes, seconds, ms)

    function Timer(TimeStart) {
      today = new Date();
      correctTime(today);
      // console.log('today ' + today)
      today = Math.floor((TimeStart - today) / 1000);
      if (today < 1) {
        return true;
        // window.setTimeout('Timer(TimeForPrint)',1000)
      } else {

        tsec = today % 60;
        // console.log((TimeStart-today)%60000 + 'mifomen')
        today = Math.floor(today / 60);
        //   console.log('today' + today)
        // if(tsec<10)tsec='0'+tsec;
        tmin = today % 60;
        today = Math.floor(today / 60);

        // if(tmin<10)tmin='0'+tmin;
        thour = today % 24;
        today = Math.floor(today / 24);
        // console.log('TimeStart-today)%60' + ((TimeStart-today)%60))
        if ((TimeStart - today) % 60 == 0) {
          document.querySelector('.first-collum').classList.add('vh')
          document.querySelector('.head').classList.add('fz')
          document.querySelectorAll('.days').forEach(element => {
            element.classList.add('fz')
          });
        } else {

        }
        document.getElementById('day').innerHTML = today;
        document.getElementById('hour').innerHTML = thour;
        document.getElementById('min').innerHTML = tmin;
        document.getElementById('sec').innerHTML = tsec;

        // var timerId = setTimeout('Timer(TimeForKey)', 1000);
        // console.log(TimeForKey - todayTime)
        if ((TimeForKey - todayTime) > 0) {
          clearTimeout(timerId);
          var timerId = setTimeout('Timer(TimeForKey)', 1000)

        } else {
          if ((TimeForKey - todayTime) < 0) {
            // reloadPage();
            clearTimeout(timerId);
            var timerId = setTimeout('Timer(TimeForPrint)', 1000)
            //  reloadPage(3)
          } else
          if (TimeForPrint - todayTime) {
            clearTimeout(timerId);
            var timerId = setTimeout('Timer(TimeForEnd)', 1000)
              // reloadPage(3);
            } else {

            }
            // correctTime();
            window.setTimeout(timerId, 1000);
             // window.setTimeout(timerId, 1000);
             //  window.setTimeout(timerId, 1000);
          // console.log('time1' + time1)
        }



        // // clearTimeout(timerId);
        // if ((TimeForKey-today)<0) (clearTimeout(timerId); window.setTimeout(timerId, 1000))
        // else { window.setTimeout(timerId, 1000);}
        // clearTimeout(timerId);
      }
      // if (day<0) break;
    }



  </script>
</body>

</html>